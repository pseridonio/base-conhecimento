# Visão Geral do Amazon EC2

## Introdução ao Amazon EC2
- **Amazon EC2 (Elastic Compute Cloud)** é um serviço web que fornece capacidade de computação segura e redimensionável na nuvem.
- Você pode provisionar servidores virtuais chamados **instâncias EC2**.
- **Principais benefícios:**
  - Lançar instâncias EC2 rapidamente.
  - Potência de computação segura e escalável.

## Principais Recursos do Amazon EC2
- **Provisionamento e Lançamento:**
  - Lançar uma ou mais instâncias EC2 em minutos.
- **Parar ou Desligar:**
  - As instâncias podem ser paradas ou terminadas quando as cargas de trabalho estiverem concluídas.
- **Pagamento Flexível:**
  - Pague por hora ou por segundo (mínimo de 60 segundos).
- **Opções de Gerenciamento:**
  - Gerencie instâncias EC2 através de:
    - AWS Management Console
    - AWS CLI
    - AWS SDKs
    - Ferramentas de automação
    - Serviços de orquestração de infraestrutura

## Criando uma Instância EC2
Para criar uma instância EC2, você deve definir o seguinte:

1. **Especificações de Hardware:**
   - CPU
   - Memória
   - Rede
   - Armazenamento
2. **Configurações Lógicas:**
   - Localização de rede
   - Regras de firewall
   - Configurações de autenticação
   - Sistema operacional de sua escolha

## Configurando EC2
- **Configurações da Instância:**
  - Escolha o tipo de instância, rede e armazenamento para criar sua instância EC2.
- **Exemplo de Aplicação:**
  - Para aplicações como o **aplicativo de diretório de funcionários**, selecione instâncias com capacidade suficiente para processar solicitações de clientes.
  - O dimensionamento da instância depende de:
    - As demandas de sua aplicação
    - O tamanho antecipado de sua base de usuários
- **Vantagens da Nuvem vs On-Premises:**
  - **On-Premises:** Prever a capacidade do servidor requer decisões difíceis e gastos de capital significativos.
  - **Baseado na Nuvem:** As mudanças de alocação podem ser feitas facilmente com uma simples **chamada de API**.
  - O **modelo de pagamento conforme o uso** da AWS permite que você ajuste a capacidade da infraestrutura à demanda da aplicação, evitando superprovisionamento desperdiçador.

## Imagens de Máquina da Amazon (AMIs)
- **Definição:**
  - Ao lançar uma instância EC2, a primeira configuração que você define é o sistema operacional, selecionando uma **Imagem de Máquina da Amazon (AMI)**.
- **Tradicional vs Nuvem:**
  - Na infraestrutura tradicional, iniciar um servidor requer a instalação manual do sistema operacional.
  - Na Nuvem AWS, a instalação do sistema operacional é tratada via AMI escolhida.
- **Componentes da AMI:**
  - Sistema operacional
  - Mapeamento de armazenamento
  - Tipo de arquitetura
  - Permissões de lançamento
  - Aplicativos de software pré-instalados
- **Encontrando AMIs:**
  - Existem várias maneiras de selecionar uma AMI:
    1. **AMIs de Início Rápido**:
       - AMIs comumente usadas criadas pela AWS para configuração rápida.
    2. **AMIs do AWS Marketplace**:
       - Software popular de código aberto e comercial fornecido por fornecedores terceiros.
    3. **Minhas AMIs**:
       - AMIs personalizadas criadas a partir de suas instâncias EC2.
    4. **AMIs da Comunidade**:
       - AMIs fornecidas pela comunidade de usuários da AWS.
    5. **Imagens Personalizadas**:
       - AMIs personalizadas criadas usando o **EC2 Image Builder**.
  - **IDs de AMI**:
    - Cada AMI no AWS Management Console possui um **ID de AMI**, prefixado por `ami-`, seguido por um hash aleatório de números e letras.
    - IDs de AMI são únicos para cada Região AWS.

## Relação entre AMIs e Instâncias EC2
- **Relação Conceitual:**
  - Instâncias EC2 são **instanciações ao vivo** do que é definido em uma AMI:
    - Comparável a um bolo sendo a instanciação ao vivo de uma receita de bolo.
    - Em termos de software, uma AMI é a **classe**, e uma instância EC2 é o **objeto**.
  - Ao lançar uma instância:
    - A AWS aloca uma máquina virtual rodando em um **hipervisor**.
    - A AMI é copiada para o **volume do dispositivo raiz**, fornecendo a imagem usada para inicializar a instância.
    - Você pode conectar-se ao servidor, instalar pacotes e implantar aplicativos (por exemplo, um servidor web com um aplicativo de diretório de funcionários).
- **Reutilização de AMIs:**
  - Use uma AMI baseada em Linux para configurar um servidor HTTP, pacotes de aplicativos e software adicional.
  - Crie novas instâncias com configurações idênticas por:
    - Configurando manualmente uma nova instância.
    - Criando uma AMI a partir de uma instância existente e reutilizando-a.
  - Você pode criar AMIs a partir de instâncias **em execução** ou **paradas** para lançar novas instâncias pré-configuradas.

## Tipos de Instância do Amazon EC2
- Instâncias EC2 são uma combinação de:
  - **vCPUs**, memória, rede, armazenamento de instância e GPUs (opcional).
- **Visão Geral dos Tipos de Instância:**
  - A AWS oferece instâncias com capacidades de desempenho variadas.
  - Os tipos de instância consistem em:
    - **Prefixo**: Tipo de cargas de trabalho otimizadas (por exemplo, computação).
    - **Geração**: Indica a versão (por exemplo, 5ª geração).
    - **Atributos Adicionais**: Recursos específicos (por exemplo, armazenamento NVMe).
    - **Tamanho**: Capacidade (por exemplo, xlarge).
  - Exemplo: Descrição do `c5n.xlarge`:
    - `c`: Família otimizada para computação.
    - `5`: Quinta geração.
    - `n`: Atributo de armazenamento NVMe local.
    - `xlarge`: Tamanho da instância.
- **Famílias de Instâncias:**
  - Famílias são otimizadas para várias cargas de trabalho (por exemplo, gráficos, uso geral, otimizado para memória).

## Localizações de Instâncias EC2
- **VPC Padrão:**
  - Instâncias EC2 são lançadas em uma **Virtual Private Cloud (VPC)** padrão, a menos que especificado.
  - A VPC padrão é adequada para configuração rápida e instâncias EC2 públicas.
  - Recursos na VPC padrão são **públicos** e acessíveis via internet.
  - **Melhor Prática:**
    - Evite colocar dados sensíveis ou informações de clientes na VPC padrão.
    - Use VPCs personalizadas com acesso restrito para melhorar a segurança e o controle de rede.

## Alta Disponibilidade
- **Arquitetando para Alta Disponibilidade:**
  - As instâncias residem em uma **Zona de Disponibilidade** de sua escolha.
  - Serviços da AWS com escopo no nível da Zona de Disponibilidade devem ser projetados para alta disponibilidade.
  - **Recomendações:**
    - Use várias instâncias:
      - Duas são melhores que uma, e três são melhores que duas.
      - Mais instâncias menores podem ser mais eficazes do que menos instâncias grandes.
    - Exemplo:
      - Se uma única instância de frontend falhar, a aplicação cai.
      - Se as cargas de trabalho estiverem distribuídas em 10 instâncias e uma falhar, apenas **10% da frota** é afetada.
  - Para alta disponibilidade, use pelo menos **duas instâncias EC2 em duas Zonas de Disponibilidade separadas**.

## AWS Well-Architected Framework e Pilar de Confiabilidade
- O **AWS Well-Architected Framework** é construído sobre **seis pilares**:
  - **Excelência Operacional**, **Segurança**, **Confiabilidade**, **Eficiência de Desempenho**, **Otimização de Custos** e **Sustentabilidade**.
- **Visão Geral do Pilar de Confiabilidade:**
  - Foca na construção de arquiteturas com:
    - Fundamentos sólidos.
    - Designs resilientes.
    - Gerenciamento de mudanças consistente.
    - Processos comprovados de recuperação de falhas.
  - Aborda desafios de ambientes tradicionais on-premises:
    - Elimina pontos únicos de falha.
    - Fornece elasticidade.
    - Automatiza processos para responder a demandas em mudança.
- **Gerenciamento de Falhas:**
  - Incorpore mecanismos de recuperação de falhas e soluções de monitoramento proativo.
  - Use estratégias de **backup e recuperação de desastres** para garantir a confiabilidade do sistema.

## Tipos e Tamanhos de Instância
- Configure instâncias EC2 por **tipo** e **tamanho** para corresponder aos requisitos de hardware:
  - Tipos agrupados com base em **casos de uso**:
    - **Otimizado para computação**, **otimizado para memória**, **otimizado para armazenamento**, etc.
  - Famílias de exemplo:
    - **Família de instâncias G**: Otimizada para **aplicações intensivas em gráficos** (por exemplo, visualizações 3D, codificação de vídeo).
    - **Família de Uso Geral M5**: Recursos balanceados adequados para aplicações como **servidores web**.
  - Exemplos de tipos de instância:
    - **T3.medium**, **A1.nano**, etc.
- As instâncias podem ser **redimensionadas** conforme necessário:
  - Altere tipos ou tamanhos programaticamente via **API** ou **AWS Management Console**.

## Flexibilidade e Controle
- Instâncias EC2 fornecem **flexibilidade e controle** na nuvem.
- As instâncias podem ser provisionadas facilmente, e o pagamento é baseado no uso:
  - **Por segundo** ou **por hora**, dependendo do tipo de instância.
- As instâncias podem ser **terminadas** ou **paradas** para evitar incorrer em cobranças.
- A AWS suporta uma variedade de sistemas operacionais:
  - **Linux**, **MacOS**, **Ubuntu**, **Windows**, e mais.

## Impacto nos Negócios
- O EC2 permite experimentação rápida com instâncias **de baixo custo** e **flexíveis**.
- Opções de otimização:
  - Selecione o **tipo de instância** e **tamanho** corretos.
  - Evite superprovisionamento de recursos.
- Benefícios em comparação com hardware on-premises:
  - Sem restrições de hardware antecipadas.
  - Configurações adaptáveis através de chamadas de API.
- Incentiva **inovação** e **agilidade** nas operações de negócios.

## Recursos
Para mais informações, veja os seguintes recursos:
- **[Site da AWS: Amazon EC2](https://aws.amazon.com/ec2/)**
- **[Guia do usuário da AWS: Imagens de Máquina da Amazon (AMI)](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AMIs.html)**
- **[Guia do usuário da AWS: Criar uma AMI Linux com suporte a EBS](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/creating-an-ami-ebs.html)**
- **[Guia do usuário da AWS: O que é o EC2 Image Builder?](https://docs.aws.amazon.com/imagebuilder/latest/userguide/what-is-image-builder.html)**
- **[Guia do usuário da AWS: VPCs Padrão](https://docs.aws.amazon.com/vpc/latest/userguide/default-vpc.html)**
- **[Whitepaper da AWS: Pilar de Confiabilidade - AWS Well-Architected Framework](https://docs.aws.amazon.com/wellarchitected/latest/reliability-pillar/welcome.html?ref=wellarchitected-wp)**
